name: Setup
description: Set up the stac-task testing environment with conda, pip, and associated caches
inputs:
  python-version:
    description: Python version to set up
    required: True
  pip-cache-hash:
    description: The hash used for the pip cache
    required: False
    default: ${{ hashFiles('setup.py', 'requirements-dev.txt') }}
runs:
  using: composite
  steps:
    - name: Set up pip cache
      uses: actions/cache@v2
      with:
        path: ~/.cache/pip
        key: ${{ runner.os }}-pip-${{ inputs.pip-cache-hash }}
        restore-keys: ${{ runner.os }}-pip-
    - name: Set up pre-commit cache
      uses: actions/cache@v2
      with:
        path: ~/.cache/pre-commit
        key: ${{ runner.os }}-pre-commit-${{ hashFiles('.pre-commit-config.yaml' )}}
        restore-keys: ${{ runner.os }}-pre-commit-
